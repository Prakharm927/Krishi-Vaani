"use client"

import { useState, useEffect, useRef } from "react"
import { useLanguage } from "@/components/language-provider"

// Mock news data
const newsItems = [
  {
    id: 1,
    icon: "ЁЯМ╛",
    text: {
      en: "Rain alert in MaharashtraтАФdelay rice sowing",
      hi: "рдорд╣рд╛рд░рд╛рд╖реНрдЯреНрд░ рдореЗрдВ рдмрд╛рд░рд┐рд╢ рдХрд╛ рдЕрд▓рд░реНрдЯтАФрдЪрд╛рд╡рд▓ рдХреА рдмреБрд╡рд╛рдИ рдореЗрдВ рджреЗрд░реА рдХрд░реЗрдВ",
      mr: "рдорд╣рд╛рд░рд╛рд╖реНрдЯреНрд░рд╛рдд рдкрд╛рд╡рд╕рд╛рдЪрд╛ рдЗрд╢рд╛рд░рд╛тАФрддрд╛рдВрджреВрд│ рдкреЗрд░рдгреА рдЙрд╢рд┐рд░рд╛ рдХрд░рд╛",
      ta: "роороХро╛ро░ро╛ро╖рпНроЯро┐ро░ро╛ро╡ро┐ро▓рпН рооро┤рпИ роОроЪрпНроЪро░ро┐роХрпНроХрпИтАФроирпЖро▓рпН ро╡ро┐родрпИрокрпНрокрпИ родро╛роородрокрпНрокроЯрпБродрпНродро╡рпБроорпН",
      te: "р░ор░╣р░╛р░░р░╛р░╖р▒Нр░Яр▒Нр░░р░▓р▒Л р░╡р░░р▒Нр░╖р░В р░╣р▒Жр░Ър▒Нр░Ър░░р░┐р░ХтАФр░╡р░░р░┐ р░╡р░┐р░др▒Нр░др░ир░╛р░▓р░ир▒Б р░Жр░▓р░╕р▒Нр░пр░В р░Ър▒Зр░пр░Вр░бр░┐",
      kn: "р▓ор▓╣р▓╛р▓░р▓╛р▓╖р│Нр▓Яр│Нр▓░р▓жр▓▓р│Нр▓▓р▓┐ р▓ор▓│р│Ж р▓Ор▓Ър│Нр▓Ър▓░р▓┐р▓Хр│ЖтАФр▓нр▓др│Нр▓др▓ж р▓мр▓┐р▓др│Нр▓др▓ир│Жр▓пр▓ир│Нр▓ир│Б р▓╡р▓┐р▓│р▓Вр▓м р▓ор▓╛р▓бр▓┐",
      pa: "риори╣ри╛ри░ри╛ри╕ри╝риЯри░ ри╡ри┐рй▒риЪ риорйАриВри╣ рижри╛ риЕри▓ри░риЯтАФриЭрйЛриирйЗ рижрйА римри┐риЬри╛риИ ри╡ри┐рй▒риЪ рижрйЗри░рйА риХри░рйЛ",
    },
  },
  {
    id: 2,
    icon: "ЁЯУв",
    text: {
      en: "тВ╣2,000 PM-KISAN installment released",
      hi: "тВ╣2,000 рдкреАрдПрдо-рдХрд┐рд╕рд╛рди рдХрд┐рд╕реНрдд рдЬрд╛рд░реА рдХреА рдЧрдИ",
      mr: "тВ╣2,000 рдкреАрдПрдо-рдХрд┐рд╕рд╛рди рд╣рдкреНрддрд╛ рдЬрд╛рд░реА",
      ta: "тВ╣2,000 рокро┐роОроорпН-роХро┐роЪро╛ройрпН родро╡рогрпИ ро╡рпЖро│ро┐ропро┐роЯрокрпНрокроЯрпНроЯродрпБ",
      te: "тВ╣2,000 р░кр░┐р░Ор░В-р░Хр░┐р░╕р░╛р░ир▒Н р░╡р░╛р░пр░┐р░жр░╛ р░╡р░┐р░бр▒Бр░жр░▓ р░Ър▒Зр░пр░мр░бр░┐р░Вр░жр░┐",
      kn: "тВ╣2,000 р▓кр▓┐р▓Ор▓В-р▓Хр▓┐р▓╕р▓╛р▓ир│Н р▓Хр▓Вр▓др│Б р▓мр▓┐р▓бр│Бр▓Чр▓бр│Жр▓пр▓╛р▓Чр▓┐р▓жр│Ж",
      pa: "тВ╣2,000 рикрйАриРрио-риХри┐ри╕ри╛рии риХри┐ри╕ри╝рид риЬри╛ри░рйА риХрйАридрйА риЧриИ",
    },
  },
  {
    id: 3,
    icon: "ЁЯзк",
    text: {
      en: "Fungal blight alert for banana crops in Tamil Nadu",
      hi: "рддрдорд┐рд▓рдирд╛рдбреБ рдореЗрдВ рдХреЗрд▓реЗ рдХреА рдлрд╕рд▓реЛрдВ рдХреЗ рд▓рд┐рдП рдлрдВрдЧрд▓ рдмреНрд▓рд╛рдЗрдЯ рдЕрд▓рд░реНрдЯ",
      mr: "рддрд╛рдорд┐рд│рдирд╛рдбреВрдордзреНрдпреЗ рдХреЗрд│реА рдкрд┐рдХрд╛рдВрд╕рд╛рдареА рдмреБрд░рд╢реАрдЬрдиреНрдп рдХрд░рдкрд╛ рд╕рд╛рд╡рдзрд╛рдирддрд╛",
      ta: "родрооро┐ро┤рпНроиро╛роЯрпНроЯро┐ро▓рпН ро╡ро╛ро┤рпИрокрпН рокропро┐ро░рпНроХро│рпБроХрпНроХрпБ рокрпВроЮрпНроЪрпИ роирпЛропрпН роОроЪрпНроЪро░ро┐роХрпНроХрпИ",
      te: "р░др░ор░┐р░│р░ир░╛р░бр▒Бр░▓р▒Л р░Ер░░р░Яр░┐ р░кр░Вр░Яр░▓р░Хр▒Б р░╢р░┐р░▓р▒Ар░Вр░жр▒Нр░░ р░др▒Жр░Чр▒Бр░▓р▒Б р░╣р▒Жр░Ър▒Нр░Ър░░р░┐р░Х",
      kn: "р▓др▓ор▓┐р▓│р│Бр▓ир▓╛р▓бр▓┐р▓ир▓▓р│Нр▓▓р▓┐ р▓мр▓╛р▓│р│Ж р▓мр│Жр▓│р│Жр▓Чр▓│р▓┐р▓Чр│Ж р▓╢р▓┐р▓▓р│Ар▓Вр▓зр│Нр▓░ р▓мр│Нр▓▓р│Ир▓Яр│Н р▓Ор▓Ър│Нр▓Ър▓░р▓┐р▓Хр│Ж",
      pa: "ридриори┐ри▓риири╛рибрйВ ри╡ри┐рй▒риЪ риХрйЗри▓рйЗ рижрйАриЖриВ рилри╕ри▓ри╛риВ ри▓риИ рилрй░риЧри▓ римри▓ри╛риИриЯ риЕри▓ри░риЯ",
    },
  },
  {
    id: 4,
    icon: "ЁЯМбя╕П",
    text: {
      en: "Heat wave warning for GujaratтАФprotect your crops",
      hi: "рдЧреБрдЬрд░рд╛рдд рдХреЗ рд▓рд┐рдП рд▓реВ рдХреА рдЪреЗрддрд╛рд╡рдиреАтАФрдЕрдкрдиреА рдлрд╕рд▓реЛрдВ рдХреА рд░рдХреНрд╖рд╛ рдХрд░реЗрдВ",
      mr: "рдЧреБрдЬрд░рд╛рддрд╕рд╛рдареА рдЙрд╖реНрдгрддреЗрдЪреА рд▓рд╛рдЯ рдЪреЗрддрд╛рд╡рдгреАтАФрдЖрдкрд▓реНрдпрд╛ рдкрд┐рдХрд╛рдВрдЪреЗ рд╕рдВрд░рдХреНрд╖рдг рдХрд░рд╛",
      ta: "роХрпБроЬро░ро╛родрпНродро┐ро▒рпНроХрпБ ро╡рпЖрокрпНрок роЕро▓рпИ роОроЪрпНроЪро░ро┐роХрпНроХрпИтАФроЙроЩрпНроХро│рпН рокропро┐ро░рпНроХро│рпИрокрпН рокро╛родрпБроХро╛роХрпНроХро╡рпБроорпН",
      te: "р░Чр▒Бр░Ьр░░р░╛р░др▒НтАМр░Хр▒Б р░╡р▒Зр░бр░┐ р░Чр░╛р░▓р▒Бр░▓ р░╣р▒Жр░Ър▒Нр░Ър░░р░┐р░ХтАФр░ор▒А р░кр░Вр░Яр░▓р░ир▒Б р░░р░Хр▒Нр░╖р░┐р░Вр░Ър▒Бр░Хр▒Лр░Вр░бр░┐",
      kn: "р▓Чр│Бр▓Ьр▓░р▓╛р▓др│НтАМр▓Чр│Ж р▓╢р▓╛р▓Цр▓ж р▓Ер▓▓р│Ж р▓Ор▓Ър│Нр▓Ър▓░р▓┐р▓Хр│ЖтАФр▓ир▓┐р▓ор│Нр▓о р▓мр│Жр▓│р│Жр▓Чр▓│р▓ир│Нр▓ир│Б р▓░р▓Хр│Нр▓╖р▓┐р▓╕р▓┐",
      pa: "риЧрйБриЬри░ри╛рид ри▓риИ риЧри░риорйА рижрйА ри▓ри╣ри┐ри░ рижрйА риЪрйЗридри╛ри╡риирйАтАФриЖрикригрйАриЖриВ рилри╕ри▓ри╛риВ рижрйА ри░рй▒риЦри┐риЖ риХри░рйЛ",
    },
  },
  {
    id: 5,
    icon: "ЁЯТз",
    text: {
      en: "New drip irrigation subsidy announced for small farmers",
      hi: "рдЫреЛрдЯреЗ рдХрд┐рд╕рд╛рдиреЛрдВ рдХреЗ рд▓рд┐рдП рдирдИ рдбреНрд░рд┐рдк рд╕рд┐рдВрдЪрд╛рдИ рд╕рдмреНрд╕рд┐рдбреА рдХреА рдШреЛрд╖рдгрд╛",
      mr: "рд▓рд╣рд╛рди рд╢реЗрддрдХрд▒реНрдпрд╛рдВрд╕рд╛рдареА рдирд╡реАрди рдард┐рдмрдХ рд╕рд┐рдВрдЪрди рдЕрдиреБрджрд╛рдирд╛рдЪреА рдШреЛрд╖рдгрд╛",
      ta: "роЪро┐ро▒рпБ ро╡ро┐ро╡роЪро╛ропро┐роХро│рпБроХрпНроХрпБ рокрпБродро┐роп роЪрпКроЯрпНроЯрпБ роирпАро░рпНрокрпНрокро╛роЪрой рооро╛ройро┐ропроорпН роЕро▒ро┐ро╡ро┐рокрпНрокрпБ",
      te: "р░Ър░┐р░ир▒Нр░и р░░р▒Ир░др▒Бр░▓р░Хр▒Б р░Хр▒Кр░др▒Нр░д р░бр▒Нр░░р░┐р░кр▒Н р░Зр░░р░┐р░Чр▒Зр░╖р░ир▒Н р░╕р░мр▒Нр░╕р░┐р░бр▒А р░кр▒Нр░░р░Хр░Яр░и",
      kn: "р▓╕р▓гр│Нр▓г р▓░р│Ир▓др▓░р▓┐р▓Чр│Ж р▓╣р│Кр▓╕ р▓╣р▓ир▓┐ р▓ир│Ар▓░р▓╛р▓╡р▓░р▓┐ р▓╕р▓мр│Нр▓╕р▓┐р▓бр▓┐ р▓Шр│Лр▓╖р▓гр│Ж",
      pa: "риЫрйЛриЯрйЗ риХри┐ри╕ри╛риири╛риВ ри▓риИ риири╡рйАриВ рибрйНри░ри┐рик ри╕ри┐рй░риЪри╛риИ ри╕римри╕ри┐рибрйА рижри╛ риРри▓ри╛рии",
    },
  },
]

export default function NewsTicker() {
  const [activeIndex, setActiveIndex] = useState(0)
  const tickerRef = useRef<HTMLDivElement>(null)
  const { currentLanguage, translate } = useLanguage()

  // Auto-scroll news items
  useEffect(() => {
    const interval = setInterval(() => {
      setActiveIndex((prevIndex) => (prevIndex + 1) % newsItems.length)
    }, 8000)

    return () => clearInterval(interval)
  }, [])

  // Get translated news text based on current language
  const getNewsText = (item: (typeof newsItems)[0]) => {
    return item.text[currentLanguage.code as keyof typeof item.text] || item.text.en
  }

  return (
    <div className="bg-yellow-100 py-2 border-b border-yellow-200 sticky top-16 z-40">
      <div className="container mx-auto px-4">
        <div className="flex items-center">
          <div className="bg-green-600 text-white px-2 py-1 rounded-md text-xs font-medium mr-3 whitespace-nowrap">
            {translate("AGRI NEWS")}
          </div>
          <div className="overflow-hidden relative flex-1" ref={tickerRef}>
            <div
              className="flex transition-transform duration-1000 ease-in-out"
              style={{ transform: `translateX(-${activeIndex * 100}%)` }}
            >
              {newsItems.map((item) => (
                <div
                  key={item.id}
                  className="min-w-full px-4 py-1 text-green-800 font-medium flex items-center whitespace-nowrap"
                >
                  <span className="mr-2">{item.icon}</span>
                  {getNewsText(item)}
                </div>
              ))}
            </div>
          </div>
          <div className="flex ml-2">
            {newsItems.map((_, index) => (
              <button
                key={index}
                className={`h-2 w-2 rounded-full mx-1 ${index === activeIndex ? "bg-green-600" : "bg-green-200"}`}
                onClick={() => setActiveIndex(index)}
                aria-label={`News item ${index + 1}`}
              />
            ))}
          </div>
        </div>
      </div>
    </div>
  )
}
